# New Project Infrastructure

## üöÄ **Terraform Infrastructure –¥–ª—è New Project**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã New Project —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ S3 bucket –¥–ª—è state.

## üìã **–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:**

### **1. S3 Bucket –¥–ª—è State**
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `new-project-terraform-state-211125755493`
- **–†–µ–≥–∏–æ–Ω:** us-east-2
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –í–∫–ª—é—á–µ–Ω–æ
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ AES256
- **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø:** ‚ùå –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

### **2. Terraform –ú–æ–¥—É–ª–∏**
- **VPC** - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–Ω–∞—è —Å–µ—Ç—å
- **Security Groups** - –≥—Ä—É–ø–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Database** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **K3s** - Kubernetes –∫–ª–∞—Å—Ç–µ—Ä
- **Bastion** - bastion host
- **App Server** - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
- **`init-terraform.sh`** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Terraform —Å S3 backend
- **`TERRAFORM_STATE_BUCKET.md`** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ S3 bucket

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**

### **1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Terraform**
```bash
cd /Users/sidwrite/project/my-go-app/infrastructure/new-project
./init-terraform.sh
```

### **2. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
```bash
terraform plan
```

### **3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
```bash
terraform apply
```

### **4. –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
```bash
terraform destroy
```

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Go App –ø—Ä–æ–µ–∫—Ç–æ–º:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Go App | New Project |
|----------|---------|------------|
| **S3 Bucket** | go-app-terraform-state-211125755493 | new-project-terraform-state-211125755493 |
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** | Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + EKS | New Project –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ |
| **–ú–æ–¥—É–ª–∏** | EKS, VPC, ArgoCD | VPC, K3s, Database, Bastion, App Server |
| **Backend** | S3 | S3 |
| **–†–µ–≥–∏–æ–Ω** | us-east-2 | us-east-2 |

## üîß **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

- **Terraform** >= 1.0
- **AWS CLI** –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å credentials
- **AWS Account** —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## üìã **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:**

```
infra/
‚îú‚îÄ‚îÄ backend.tf                    # S3 backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main.tf                      # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ variables.tf                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ outputs.tf                   # Outputs
‚îú‚îÄ‚îÄ versions.tf                  # –í–µ—Ä—Å–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ terraform.tfvars.example     # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ init-terraform.sh            # –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ TERRAFORM_STATE_BUCKET.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ S3
‚îî‚îÄ‚îÄ modules/                     # Terraform –º–æ–¥—É–ª–∏
    ‚îú‚îÄ‚îÄ vpc/
    ‚îú‚îÄ‚îÄ security_groups/
    ‚îú‚îÄ‚îÄ database/
    ‚îú‚îÄ‚îÄ k3s/
    ‚îú‚îÄ‚îÄ bastion/
    ‚îî‚îÄ‚îÄ app_server/
```

## üéØ **Workflow:**

```
1. ./init-terraform.sh          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
2. terraform plan              # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
3. terraform apply             # –°–æ–∑–¥–∞–Ω–∏–µ
4. terraform destroy           # –£–¥–∞–ª–µ–Ω–∏–µ
```

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å state –≤ S3
aws s3 ls s3://new-project-terraform-state-211125755493/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Terraform state
terraform state list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å outputs
terraform output
```

## üõ†Ô∏è **Troubleshooting:**

### **–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**
```bash
# –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
terraform init -reconfigure

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
terraform init -force-copy
```

### **–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ S3:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å bucket
aws s3api head-bucket --bucket new-project-terraform-state-211125755493

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
aws s3api list-objects-v2 --bucket new-project-terraform-state-211125755493
```

## üéâ **–ì–æ—Ç–æ–≤–æ!**

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
- ‚úÖ **–û—Ç–¥–µ–ª—å–Ω—ã–π S3 bucket** –¥–ª—è New Project
- ‚úÖ **Terraform –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —Å –º–æ–¥—É–ª—è–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ú–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è New Project –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç Go App! üöÄ
